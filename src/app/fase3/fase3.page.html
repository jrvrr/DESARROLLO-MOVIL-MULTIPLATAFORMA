<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Fase 3: Confirmación del Cliente</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="container">
    <!-- Sección de Confirmación -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Confirmación</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>¿Está de acuerdo con la propuesta enviada?</p>
        <ion-list>
          <ion-radio-group [(ngModel)]="respuestaSeleccionada">
            <ion-item *ngFor="let opcion of opciones">
              <ion-label>{{ opcion }}</ion-label>
              <ion-radio slot="start" [value]="opcion"></ion-radio>
            </ion-item>
          </ion-radio-group>
        </ion-list>
        <ion-button expand="full" class="button-yellow" (click)="confirmar()">Confirmar</ion-button>
      </ion-card-content>
    </ion-card>

    <!-- Sección de Pedido -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Detalles del Pedido</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p><strong>Título:</strong> {{ pedido?.titulo }}</p>
        <p><strong>Descripción:</strong> {{ pedido?.descripcion }}</p>
        <p><strong>Medidas:</strong> {{ pedido?.medidas }}</p>
      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-header>
        <ion-card-title>Chat de Propuestas</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="chat-container">
          <div *ngFor="let mensaje of mensajes" [ngClass]="{'cliente': mensaje.tipo === 'cliente', 'empresa': mensaje.tipo === 'empresa'}">
            {{ mensaje.texto }}
          </div>
        </div>
        <div class="chat-input">
          <ion-input [(ngModel)]="mensajeNuevo" placeholder="Escribe tu mensaje..."></ion-input>
          <ion-button fill="clear" color="primary" (click)="enviarMensaje()">➤</ion-button>
        </div>
      </ion-card-content>
    </ion-card>

    <ion-button expand="full" class="button-yellow" (click)="continuar()">Continuar a Fase 4</ion-button>
  </div>
</ion-content>
